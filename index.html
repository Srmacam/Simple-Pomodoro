<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <title>Index</title>
    <!-- Moved the css to a different file for organizational purposes -->
    <link rel="stylesheet" type="text/css" href="./index.css">
  </head>
  
  <body>
    <main>
        <!-- The start menu frame --> 
        <div id="StartFrame" class="frame" style="display: block">
            <p>Hello Pomodoro</p>
            <br>
            <button id="StartButton" class="button button-start">
                Start App
            </div>
        </div>

        <div id="SettingsFrame" class="frame">
            <p>Set session timers (in minutes)</p><br>
            <!-- Feel free to edit the settings form however you want, didn't really style it-->
            <!-- Submitting the form reloads the page, so no submit button was added -->
            <form id="SettingsForm" method="post" onsubmit="return false;">
                <label for="WorkTime">Work</label><br>
                <input type="number" id="WorkTime" name="WorkTime" min="1" value="25">
                <br><br>
                <label for="BreakTime">Break</label>
                <input type="number" id="BreakTime" name="BreakTime" min="1" value="5">
                <br><br>
                <label for="NumSessions">Sessions</label>
                <input type="number" id="NumSessions" name="NumSessions" min="1" value="4">
            </form>
            <br><br>
            <button id="BeginButton" class="button button-start">
                Begin Timer
            </button>
        </div>

        <div id="TimerFrame" class="frame">
            <p id="Timer" class="timer">Timer Frame</p>
            <br>
            <button id="StopButton" class="button button-stop">
                Stop Timer
            </button>
        </div>
    </main>
  </body>
  
  <script>
      // Callback function to start the app
      StartButton.addEventListener('click', (e) => {
          TransitionFrame("StartFrame", "SettingsFrame");
      });
      
      // Callback function to start the timer
      BeginButton.addEventListener('click', (e) => {
          let workTime = document.getElementById("WorkTime").value;
          let breakTime = document.getElementById("BreakTime").value;
          let numSessions = document.getElementById("NumSessions").value;

          // Validate form input
          if (isNaN(workTime) || isNaN(breakTime) || isNaN(numSessions) || 
              workTime < 1 || breakTime < 1 || numSessions < 1) {
              alert("Please use only positive integers.");
          }

          else {
            let prevFrame = document.getElementById("SettingsFrame");
            prevFrame.style.display = "none";
            
            // Dummy timer module, uses the input from earlier
            let seconds = "00";
            document.getElementById("Timer").innerHTML = workTime + ":" + seconds;

            let nextFrame = document.getElementById("TimerFrame");
            nextFrame.style.display = "block";
            
          }
      });
      
      // Callback function to stop the timer
      StopButton.addEventListener('click', (e) => {
          TransitionFrame("TimerFrame", "StartFrame");
      });
      
      // Helper function to transition between states
      function TransitionFrame(frame1, frame2)
      {
          let prevFrame = document.getElementById(frame1);
          prevFrame.style.display = "none";
          
          let nextFrame = document.getElementById(frame2);
          nextFrame.style.display = "block";
      }
  </script>
</html>
